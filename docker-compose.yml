# Versi칩n del esquema de docker-compose.
version: "3.9"

services:
  appetix_back:
    # Construimos la imagen usando el Dockerfile preparado.
    build:
      context: .
      dockerfile: Dockerfile
    container_name: appetix_back

    # Cargamos autom치ticamente todas las variables definidas en .env.
    env_file:
      - .env

    # Fuerza NODE_ENV=production dentro del contenedor (adem치s del resto del .env).
    environment:
      NODE_ENV: "production"

    # Hacemos accesible el backend en el puerto 4000 del host.
    ports:
      - "4000:4000"

    # Reinicia autom치ticamente salvo que se detenga manualmente.
    restart: unless-stopped
